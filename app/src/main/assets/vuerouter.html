<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			.router-link-active {
				font-size: 20px;
				background: red;
			}
		</style>
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<link rel="stylesheet" href="test/animate.css">
		<script src="test/vue.min.js"></script>
		<script src="test/vue-router.min.js"></script>

	</head>
	<body>
		<div id="box">
			<input type="button" value="push一个路由" @click="push"/>
			<input type="button" value="replace一个路由" @click="replace" />
			<div>
				<router-link to="/home">主页</router-link>
				<router-link to="/user">用户</router-link>
			</div>
			<div>
				<transition enter-active-class="animated zoomInLeft"
					leave-active-class="animated zoomOutRight">
					<router-view></router-view>
				</transition>
				
			</div>
		</div>
		<script>
			// 组件
			const Home = {
				template: '<h3>这是首页</h3>'
			};
			const User = {
				template: `
					<div>
						<h3>这是用户</h3>
						<li><router-link to='/user/dailiwnag/age/10'>dailiwnag</router-link></li>
						<li><router-link to='/user/gaolijun/age/20'>gaolijun</router-link></li>
						<li><router-link to='/user/happy/age/30'>happy</router-link></li>
						<transition enter-active-class="animated fadeIn"
							leave-active-class="animated fadeOut">
							<router-view></router-view>
						</transition>
						
					</div>
				`,
				beforeRouteLeave (to, from, next) {
				    // 导航离开该组件的对应路由时调用
				    // 可以访问组件实例 `this`
				    if(window.confirm("确定离开吗？")){
				    	next(true);
				    }else{
				    	next(false);
				    }
				  }
			};
			const Person = {
				template: '<div>这是用户{{$route.params}}</div>'
			}
			// 配置路由
			const routes = [
				{
					path: '/home',
					component: Home
				},
				{
					path: '/user', 
					component: User,
					children: [
						{path:':username/age/:age',component:Person}
					]
				},
				{
					path:'*', redirect:'/home'
				}
			];
			// 生成路由实例
			const router = new VueRouter({
				routes
			});
			// 挂载
			new Vue({
				router,
				methods: {
					push(){
						router.push({path: '/home'});
					},
					replace(){
						router.replace({path: '/user'});
					}
				}
			}).$mount('#box');
		</script>
	</body>
</html>
